<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý khóa học - EduPay</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="css/payment-history.css">
    <link rel="stylesheet" href="css/admin.css">
</head> 
<body>
    <!-- Sidebar Menu -->
    <aside class="sidebar animate__animated animate__fadeInLeft">
        <div class="sidebar-header">
            <a href="admin-dashboard.html" class="sidebar-logo">
                <i class="fas fa-graduation-cap"></i>
                <span class="sidebar-logo-text">EduPay</span>
            </a>
            <button id="sidebarToggle" class="sidebar-toggle">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li class="sidebar-menu-item">
                <a href="admin-dashboard.html" class="sidebar-menu-link">
                    <span class="sidebar-menu-icon"><i class="fas fa-home"></i></span>
                    <span class="sidebar-menu-text">Trang chủ</span>
                </a>
            </li>
            <li class="sidebar-menu-item">
                <a href="admin-students.html" class="sidebar-menu-link">
                    <span class="sidebar-menu-icon"><i class="fas fa-user-graduate"></i></span>
                    <span class="sidebar-menu-text">Quản lý danh sách sinh viên</span>
                </a>
            </li>
            <li class="sidebar-menu-item">
                <a href="admin-tuition.html" class="sidebar-menu-link">
                    <span class="sidebar-menu-icon"><i class="fas fa-money-bill-wave"></i></span>
                    <span class="sidebar-menu-text">Quản lý học phí theo kỳ</span>
                </a>
            </li>
            <li class="sidebar-menu-item">
                <a href="admin-courses.html" class="sidebar-menu-link active">
                    <span class="sidebar-menu-icon"><i class="fas fa-book"></i></span>
                    <span class="sidebar-menu-text">Quản lý khóa học</span>
                </a>
            </li>
            <li class="sidebar-menu-item">
                <a href="admin-manual-payment.html" class="sidebar-menu-link">
                    <span class="sidebar-menu-icon"><i class="fas fa-check-circle"></i></span>
                    <span class="sidebar-menu-text">Xác nhận thanh toán thủ công</span>
                </a>
            </li>
            <li class="sidebar-menu-item">
                <a href="admin-reports.html" class="sidebar-menu-link">
                    <span class="sidebar-menu-icon"><i class="fas fa-file-invoice"></i></span>
                    <span class="sidebar-menu-text">Xuất báo cáo thanh toán</span>
                </a>
            </li>
            <li class="sidebar-menu-item">
                <a href="admin-system.html" class="sidebar-menu-link">
                    <span class="sidebar-menu-icon"><i class="fas fa-cogs"></i></span>
                    <span class="sidebar-menu-text">Quản lý hệ thống</span>
                </a>
            </li>
        </ul>
    </aside>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle animate__animated animate__fadeIn">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Main Content -->
    <div class="main-container animate__animated animate__fadeIn">
        <header>
            <nav>
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <div>
                        <div class="user-name" id="userName">Xin chào</div>
                        <div id="userRole">Quản trị viên</div>
                    </div>
                </div>
                <button id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    Đăng xuất
                </button>
            </nav>
        </header>

        <main>
            <section class="dashboard-section">
                <h1 class="section-title">Quản lý khóa học</h1>
                
                <ul class="nav nav-tabs" id="courseTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="course-cohorts-tab" data-bs-toggle="tab" data-bs-target="#course-cohorts" type="button" role="tab" aria-controls="course-cohorts" aria-selected="true">Khóa học</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="majors-tab" data-bs-toggle="tab" data-bs-target="#majors" type="button" role="tab" aria-controls="majors" aria-selected="false">Chuyên ngành</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="subjects-tab" data-bs-toggle="tab" data-bs-target="#subjects" type="button" role="tab" aria-controls="subjects" aria-selected="false">Môn học</button>
                    </li>
                </ul>

                <div class="tab-content mt-4" id="courseTabContent">
                    <!-- Tab Khóa học -->
                    <div class="tab-pane fade show active" id="course-cohorts" role="tabpanel" aria-labelledby="course-cohorts-tab">
                        <div class="admin-form">
                            <h2 class="subsection-title">Danh sách khóa học</h2>
                            <div class="admin-btn-group">
                                <button class="admin-btn admin-btn-primary" id="addCohortBtn">
                                    <i class="fas fa-plus"></i> Thêm khóa học mới
                                </button>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Tên khóa</th>
                                        <th>Năm bắt đầu</th>
                                        <th>Năm kết thúc</th>
                                        <th>Số sinh viên</th>
                                        <th>Trạng thái</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="cohortsTableBody">
                                    <!-- Dữ liệu sẽ được thêm vào bằng JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Tab Chuyên ngành -->
                    <div class="tab-pane fade" id="majors" role="tabpanel" aria-labelledby="majors-tab">
                        <div class="admin-form">
                            <h2 class="subsection-title">Tìm kiếm chuyên ngành</h2>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="searchMajorCode">Mã ngành</label>
                                    <input type="text" id="searchMajorCode" class="form-control" placeholder="Nhập mã ngành">
                                </div>
                                <div class="form-group">
                                    <label for="searchMajorName">Tên ngành</label>
                                    <input type="text" id="searchMajorName" class="form-control" placeholder="Nhập tên ngành">
                                </div>
                                <div class="form-group">
                                    <label for="searchMajorFaculty">Khoa</label>
                                    <select id="searchMajorFaculty" class="form-select">
                                        <option value="">Tất cả</option>
                                        <option value="CNTT">Công nghệ thông tin</option>
                                        <option value="QTKD">Quản trị kinh doanh</option>
                                        <option value="KT">Kế toán</option>
                                        <option value="NNA">Ngôn ngữ Anh</option>
                                    </select>
                                </div>
                            </div>
                            <div class="admin-btn-group">
                                <button class="admin-btn admin-btn-primary" id="searchMajorBtn">
                                    <i class="fas fa-search"></i> Tìm kiếm
                                </button>
                                <button class="admin-btn admin-btn-secondary" id="resetMajorBtn">
                                    <i class="fas fa-redo"></i> Đặt lại
                                </button>
                                <button class="admin-btn admin-btn-primary" id="addMajorBtn">
                                    <i class="fas fa-plus"></i> Thêm chuyên ngành mới
                                </button>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Mã ngành</th>
                                        <th>Tên ngành</th>
                                        <th>Khoa</th>
                                        <th>Mô tả</th>
                                        <th>Trạng thái</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="majorsTableBody">
                                    <!-- Dữ liệu sẽ được thêm vào bằng JavaScript -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Phân trang -->
                        <div class="pagination-container">
                            <button class="pagination-btn" data-page="prev" disabled><i class="fas fa-chevron-left"></i></button>
                            <button class="pagination-btn active" data-page="1">1</button>
                            <button class="pagination-btn" data-page="2">2</button>
                            <span class="pagination-ellipsis">...</span>
                            <button class="pagination-btn" data-page="next"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>

                    <!-- Tab Môn học -->
                    <div class="tab-pane fade" id="subjects" role="tabpanel" aria-labelledby="subjects-tab">
                        <div class="admin-form">
                            <h2 class="subsection-title">Tìm kiếm môn học</h2>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="searchSubjectCode">Mã môn học</label>
                                    <input type="text" id="searchSubjectCode" class="form-control" placeholder="Nhập mã môn học">
                                </div>
                                <div class="form-group">
                                    <label for="searchSubjectName">Tên môn học</label>
                                    <input type="text" id="searchSubjectName" class="form-control" placeholder="Nhập tên môn học">
                                </div>
                                <div class="form-group">
                                    <label for="searchSubjectMajor">Ngành</label>
                                    <select id="searchSubjectMajor" class="form-select">
                                        <option value="">Tất cả</option>
                                        <!-- Các options sẽ được load từ JavaScript -->
                                    </select>
                                </div>
                            </div>
                            <div class="admin-btn-group">
                                <button class="admin-btn admin-btn-primary" id="searchSubjectBtn">
                                    <i class="fas fa-search"></i> Tìm kiếm
                                </button>
                                <button class="admin-btn admin-btn-secondary" id="resetSubjectBtn">
                                    <i class="fas fa-redo"></i> Đặt lại
                                </button>
                                <button class="admin-btn admin-btn-primary" id="addSubjectBtn">
                                    <i class="fas fa-plus"></i> Thêm môn học mới
                                </button>
                                <button class="admin-btn admin-btn-secondary" id="importSubjectsBtn">
                                    <i class="fas fa-file-import"></i> Nhập từ Excel
                                </button>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Mã môn học</th>
                                        <th>Tên môn học</th>
                                        <th>Số tín chỉ</th>
                                        <th>Ngành</th>
                                        <th>Bắt buộc</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="subjectsTableBody">
                                    <!-- Dữ liệu sẽ được thêm vào bằng JavaScript -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Phân trang -->
                        <div class="pagination-container">
                            <button class="pagination-btn" data-page="prev" disabled><i class="fas fa-chevron-left"></i></button>
                            <button class="pagination-btn active" data-page="1">1</button>
                            <button class="pagination-btn" data-page="2">2</button>
                            <span class="pagination-ellipsis">...</span>
                            <button class="pagination-btn" data-page="next"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal Thêm/Sửa Khóa học -->
    <div class="modal fade" id="cohortModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cohortModalTitle">Thêm khóa học mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="cohortForm">
                        <input type="hidden" id="cohortId">
                        <div class="mb-3">
                            <label for="cohortName" class="form-label">Tên khóa học</label>
                            <input type="text" class="form-control" id="cohortName" required>
                        </div>
                        <div class="mb-3">
                            <label for="cohortStartYear" class="form-label">Năm bắt đầu</label>
                            <input type="number" class="form-control" id="cohortStartYear" required min="2000" max="2050">
                        </div>
                        <div class="mb-3">
                            <label for="cohortEndYear" class="form-label">Năm kết thúc</label>
                            <input type="number" class="form-control" id="cohortEndYear" required min="2000" max="2050">
                        </div>
                        <div class="mb-3">
                            <label for="cohortStatus" class="form-label">Trạng thái</label>
                            <select class="form-select" id="cohortStatus" required>
                                <option value="active">Đang hoạt động</option>
                                <option value="pending">Chuẩn bị</option>
                                <option value="completed">Đã kết thúc</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="admin-btn admin-btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="admin-btn admin-btn-primary" id="saveCohortBtn">Lưu</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Thêm/Sửa Chuyên ngành -->
    <div class="modal fade" id="majorModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="majorModalTitle">Thêm chuyên ngành mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="majorForm">
                        <div class="mb-3">
                            <label for="majorCode" class="form-label">Mã ngành</label>
                            <input type="text" class="form-control" id="majorCode" required>
                        </div>
                        <div class="mb-3">
                            <label for="majorName" class="form-label">Tên ngành</label>
                            <input type="text" class="form-control" id="majorName" required>
                        </div>
                        <div class="mb-3">
                            <label for="majorFaculty" class="form-label">Khoa</label>
                            <select class="form-select" id="majorFaculty" required>
                                <option value="">Chọn khoa</option>
                                <option value="CNTT">Công nghệ thông tin</option>
                                <option value="QTKD">Quản trị kinh doanh</option>
                                <option value="KT">Kế toán</option>
                                <option value="NNA">Ngôn ngữ Anh</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="majorDescription" class="form-label">Mô tả</label>
                            <textarea class="form-control" id="majorDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="majorStatus" class="form-label">Trạng thái</label>
                            <select class="form-select" id="majorStatus" required>
                                <option value="active">Đang hoạt động</option>
                                <option value="inactive">Không hoạt động</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="admin-btn admin-btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="admin-btn admin-btn-primary" id="saveMajorBtn">Lưu</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Thêm/Sửa Môn học -->
    <div class="modal fade" id="subjectModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="subjectModalTitle">Thêm môn học mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="subjectForm">
                        <div class="mb-3">
                            <label for="subjectCode" class="form-label">Mã môn học</label>
                            <input type="text" class="form-control" id="subjectCode" required>
                        </div>
                        <div class="mb-3">
                            <label for="subjectName" class="form-label">Tên môn học</label>
                            <input type="text" class="form-control" id="subjectName" required>
                        </div>
                        <div class="mb-3">
                            <label for="subjectCredits" class="form-label">Số tín chỉ</label>
                            <input type="number" class="form-control" id="subjectCredits" required min="1" max="10">
                        </div>
                        <div class="mb-3">
                            <label for="subjectMajor" class="form-label">Ngành</label>
                            <select class="form-select" id="subjectMajor" required>
                                <option value="">Chọn ngành</option>
                                <!-- Options will be loaded from JavaScript -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="subjectRequired" checked>
                                <label class="form-check-label" for="subjectRequired">
                                    Môn học bắt buộc
                                </label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="subjectDescription" class="form-label">Mô tả môn học</label>
                            <textarea class="form-control" id="subjectDescription" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="admin-btn admin-btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="admin-btn admin-btn-primary" id="saveSubjectBtn">Lưu</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/utils/auth.js" type="module"></script>
    <script src="js/utils/toast.js" type="module"></script>
    <script src="js/admin-courses.js" type="module"></script>
</body>
</html> 